{"version":3,"sources":["app.js","main.js","directives/content.js","directives/footer.js","directives/login.js","directives/navbar.js","routes/admin.js","routes/guest.js","routes/registred.js","services/loginFactory.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjEA;AACA;AACA;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvBA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnCA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"subalcatel.js","sourcesContent":["var subalcatelApp = angular.module('subalcatelApp',\n    [\n        'ngAnimate',\n        'ui.router',\n        'mgcrea.ngStrap',\n        'angular-jwt'\n    ]\n);\n\nsubalcatelApp.constant(\n    'api_url', '/api'\n);\n\nsubalcatelApp.config(function Config($httpProvider, jwtInterceptorProvider) {\n    jwtInterceptorProvider.tokenGetter = [\n        'config',\n        'jwtHelper',\n        '$alert',\n        '$http',\n        function(config, jwtHelper, $alert, $http) {\n            var token = localStorage.getItem('id_token');\n            var refreshToken = localStorage.getItem('refresh_token');\n            // Skip authentication for any requests ending in .html\n            //console.log(config.url);\n            if ((config.url.substr(config.url.length - 5) == '.html') || config.url.match(/signin/g)) {\n                console.log('Macth \"html\" || \"signin\"');\n                return null;\n            }\n\n            if (!token || token == \"undefined\") {\n                var token_error = $alert({\n                    title: 'Token Error',\n                    content: 'You are not log in',\n                    type: 'danger',\n                    placement: 'top',\n                    show: 'true',\n                    container: 'body'\n                });\n            }\n            else if (jwtHelper.isTokenExpired(token)) {\n                // This is a promise of a JWT id_token\n                return $http({\n                    url: '/delegation',\n                    // This makes it so that this request doesn't send the JWT\n                    skipAuthorization: true,\n                    method: 'POST',\n                    data: {\n                        grant_type: 'refresh_token',\n                        refresh_token: refreshToken\n                    }\n                }).then(function(response) {\n                    var token = response.data.token;\n                    localStorage.setItem('id_token', token);\n                    return token;\n                });\n            }\n            else {\n                return token;\n            }\n\n            //return token;\n        }\n    ];\n\n    $httpProvider.interceptors.push('jwtInterceptor');\n});","subalcatelApp.controller('main', ['$scope', function($scope){\n\n}]);","subalcatelApp.directive('content', [function(){\n    return {\n        restrict: 'A',\n        templateUrl: 'templates/layout/content.html',\n        replace: true,\n        transclude: true\n    };\n}]);","subalcatelApp.directive('footer', [ function(){\n    return {\n        restrict: 'A',\n        templateUrl: 'templates/layout/footer.html',\n        replace: true,\n        transclude: true\n    };\n}]);","subalcatelApp.directive('login', [\n    'loginFactory',\n    'jwtHelper',\n    '$alert',\n    function(loginFactory, jwtHelper, $alert) {\n        return {\n            restrict: 'AE   ',\n            templateUrl: 'templates/directives/login.html',\n            replace: true,\n            transclude: true,\n            link: function(scope, elem, attr) {\n                scope.login = function() {\n                    loginFactory.signin(scope.credentials).\n                        success(function(login) {\n                            localStorage.setItem('id_token', login.token);\n                            loginFactory.isAuth = true;\n                            console.log(login);\n                        })\n                        .error(function(error) {\n                            var alert_error = $alert({\n                                title: 'Error',\n                                content: error.error  || 'Erreur',\n                                type: 'danger',\n                                placement: 'top',\n                                show: 'true',\n                                container: 'body'\n                            });\n                        });\n                };\n\n                scope.ping = function() {\n                    loginFactory.ping()\n                        .success(function(data) {\n                            console.log('User is auth :' + loginFactory.isAuth);\n                            console.log(data);\n                        })\n                        .error(function(err) {\n                            console.log('User is auth :' + loginFactory.isAuth);\n                            console.log(err);\n                        });\n                };\n\n                scope.isAuth = loginFactory.isAuth;\n            }\n        }\n    }\n]);","subalcatelApp.directive('navbar', [ function(){\n    return {\n        restrict: 'A',\n        templateUrl: 'templates/layout/navbar.html',\n        replace: true,\n        transclude: true,\n        controller: [\n            '$scope',\n            '$location',\n            function($scope, $location) {\n                $scope.navigation = {\n                    title: 'Navigation',\n                    content: 'Test'\n                };\n                $scope.menu = {\n                    title: 'Menu',\n                    content: 'Test'\n                };\n\n                $scope.navbar_menu = \"templates/layout/navbar-menu.html\";\n                $scope.offcanvas_menu = \"templates/layout/offcanvas-menu.html\";\n        }]\n    };\n}]);","","subalcatelApp.config([\n    '$stateProvider',\n    '$urlRouterProvider',\n    function($stateProvider, $urlRouterProvider) {\n        // Guest routes\n        $stateProvider\n            .state('home',\n                {\n                    url: '/',\n                    templateUrl: 'templates/guest/index.html'\n                }\n            )\n            .state('informations',\n                {\n                    url: '/informations',\n                    abstract: true,\n                    template: '<ui-view/>'\n                }\n            )\n            .state('informations.contact',\n                {\n                    url: '/contact',\n                    templateUrl: 'templates/guest/informations/contact.html'\n                }\n            )\n            .state('informations.a-propos',\n                {\n                    url: '/a-propos',\n                    templateUrl: 'templates/guest/informations/apropos.html'\n                }\n            )\n        ;\n        // Default route\n        $urlRouterProvider.otherwise('/');\n    }\n]);","","subalcatelApp.factory('loginFactory', [\n    '$http',\n    'api_url',\n    function($http, api_url) {\n        var loginFact = {};\n\n        loginFact.isAuth = false;\n\n        loginFact.signin = function (credentials) {\n            return $http.post(api_url + '/auth/signin', credentials);\n        };\n\n        loginFact.ping = function() {\n            return $http.get(api_url + '/auth/ping');\n        };\n\n        return loginFact;\n    }\n]);"],"sourceRoot":"/source/"}